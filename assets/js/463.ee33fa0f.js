(window.webpackJsonp=window.webpackJsonp||[]).push([[463],{939:function(n,s,e){"use strict";e.r(s);var a=e(17),t=Object(a.a)({},(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"分包预下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分包预下载"}},[n._v("#")]),n._v(" 分包预下载")]),n._v(" "),e("blockquote",[e("p",[n._v("基础库 2.3.0 开始支持，低版本需做"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("兼容处理"),e("OutboundLink")],1),n._v("。 开发者工具请使用 1.02.1808300 及以上版本，可"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("点此下载"),e("OutboundLink")],1),n._v("。")])]),n._v(" "),e("p",[n._v("开发者可以通过配置，在进入小程序某个页面时，由框架自动预下载可能需要的分包，提升进入后续分包页面时的启动速度。对于"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/independent.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("独立分包"),e("OutboundLink")],1),n._v("，也可以预下载主包。")]),n._v(" "),e("p",[e("strong",[n._v("分包预下载目前只支持通过配置方式使用，暂不支持通过调用API完成。")])]),n._v(" "),e("blockquote",[e("p",[n._v("vConsole 里有"),e("code",[n._v("preloadSubpackages")]),n._v("开头的日志信息，可以用来验证预下载的情况。")])]),n._v(" "),e("h3",{attrs:{id:"配置方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置方法"}},[n._v("#")]),n._v(" 配置方法")]),n._v(" "),e("p",[n._v("预下载分包行为在进入某个页面时触发，通过在 "),e("code",[n._v("app.json")]),n._v(" 增加 "),e("code",[n._v("preloadRule")]),n._v(" 配置来控制。")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('{\n  "pages": ["pages/index"],\n  "subpackages": [\n    {\n      "root": "important",\n      "pages": ["index"]\n    },\n    {\n      "root": "sub1",\n      "pages": ["index"]\n    },\n    {\n      "name": "hello",\n      "root": "path/to",\n      "pages": ["index"]\n    },\n    {\n      "root": "sub3",\n      "pages": ["index"]\n    },\n    {\n      "root": "indep",\n      "pages": ["index"],\n      "independent": true\n    }\n  ],\n  "preloadRule": {\n    "pages/index": {\n      "network": "all",\n      "packages": ["important"]\n    },\n    "sub1/index": {\n      "packages": ["hello", "sub3"]\n    },\n    "sub3/index": {\n      "packages": ["path/to"]\n    },\n    "indep/index": {\n      "packages": ["__APP__"]\n    }\n  }\n}\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br"),e("span",{staticClass:"line-number"},[n._v("20")]),e("br"),e("span",{staticClass:"line-number"},[n._v("21")]),e("br"),e("span",{staticClass:"line-number"},[n._v("22")]),e("br"),e("span",{staticClass:"line-number"},[n._v("23")]),e("br"),e("span",{staticClass:"line-number"},[n._v("24")]),e("br"),e("span",{staticClass:"line-number"},[n._v("25")]),e("br"),e("span",{staticClass:"line-number"},[n._v("26")]),e("br"),e("span",{staticClass:"line-number"},[n._v("27")]),e("br"),e("span",{staticClass:"line-number"},[n._v("28")]),e("br"),e("span",{staticClass:"line-number"},[n._v("29")]),e("br"),e("span",{staticClass:"line-number"},[n._v("30")]),e("br"),e("span",{staticClass:"line-number"},[n._v("31")]),e("br"),e("span",{staticClass:"line-number"},[n._v("32")]),e("br"),e("span",{staticClass:"line-number"},[n._v("33")]),e("br"),e("span",{staticClass:"line-number"},[n._v("34")]),e("br"),e("span",{staticClass:"line-number"},[n._v("35")]),e("br"),e("span",{staticClass:"line-number"},[n._v("36")]),e("br"),e("span",{staticClass:"line-number"},[n._v("37")]),e("br"),e("span",{staticClass:"line-number"},[n._v("38")]),e("br"),e("span",{staticClass:"line-number"},[n._v("39")]),e("br"),e("span",{staticClass:"line-number"},[n._v("40")]),e("br"),e("span",{staticClass:"line-number"},[n._v("41")]),e("br"),e("span",{staticClass:"line-number"},[n._v("42")]),e("br")])]),e("p",[e("code",[n._v("preloadRule")]),n._v(" 中，"),e("code",[n._v("key")]),n._v(" 是页面路径，"),e("code",[n._v("value")]),n._v(" 是进入此页面的预下载配置，每个配置有以下几项：")]),n._v(" "),e("table",[e("thead",[e("tr",[e("th",[n._v("字段")]),n._v(" "),e("th",[n._v("类型")]),n._v(" "),e("th",[n._v("必填")]),n._v(" "),e("th",[n._v("默认值")]),n._v(" "),e("th",[n._v("说明")])])]),n._v(" "),e("tbody",[e("tr",[e("td",[n._v("packages")]),n._v(" "),e("td",[n._v("StringArray")]),n._v(" "),e("td",[n._v("是")]),n._v(" "),e("td",[n._v("无")]),n._v(" "),e("td",[n._v("进入页面后预下载分包的 "),e("code",[n._v("root")]),n._v(" 或 "),e("code",[n._v("name")]),n._v("。"),e("code",[n._v("__APP__")]),n._v(" 表示主包。")])]),n._v(" "),e("tr",[e("td",[n._v("network")]),n._v(" "),e("td",[n._v("String")]),n._v(" "),e("td",[n._v("否")]),n._v(" "),e("td",[n._v("wifi")]),n._v(" "),e("td",[n._v("在指定网络下预下载，可选值为："),e("code",[n._v("all")]),n._v(": 不限网络 "),e("code",[n._v("wifi")]),n._v(": 仅wifi下预下载")])])])]),n._v(" "),e("h3",{attrs:{id:"限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#限制"}},[n._v("#")]),n._v(" 限制")]),n._v(" "),e("p",[n._v("同一个分包中的页面享有共同的预下载大小限额 2M，限额会在工具中打包时校验。")]),n._v(" "),e("p",[n._v("如，页面 A 和 B 都在同一个分包中，A 中预下载总大小 0.5M 的分包，B中最多只能预下载总大小 1.5M 的分包。")])])}),[],!1,null,null,null);s.default=t.exports}}]);